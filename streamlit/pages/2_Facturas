import streamlit as st
import requests

st.title("Gestión de Facturas")

# Función para obtener facturas
def obtener_facturas():
    response = requests.get('http://localhost:8000/facturas/')
    if response.status_code == 200:
        return response.json()
    else:
        st.error("Error al obtener las facturas")
        return []

# Mostrar facturas
facturas = obtener_facturas()
for factura in facturas:
    st.write(f"Factura ID: {factura['id']}")
    st.write(f"Cliente: {factura['cliente']['nombre']}")
    st.write(f"Total: {factura['cita']['total']}")
    st.write(f"Estado de Pago: {factura['cita']['estado_pago']}")
    if st.button("Marcar como Pagada", key=factura['id']):
        # Aquí puedes implementar la lógica para marcar la factura como pagada
        st.success("Factura marcada como pagada")
    st.write("---")